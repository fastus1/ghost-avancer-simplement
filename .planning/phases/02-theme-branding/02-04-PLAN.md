---
phase: 02-theme-branding
plan: 04
type: execute
wave: 3
depends_on: ["02-02", "02-03"]
files_modified:
  - content/themes/avancer-simplement/assets/images/favicon.ico
  - content/themes/avancer-simplement/assets/images/logo.svg
  - content/themes/avancer-simplement/partials/icons/logo.hbs
autonomous: false

must_haves:
  truths:
    - "Favicon displays in browser tab"
    - "Logo displays in site header"
    - "Theme activates in Ghost without errors"
    - "Dark/light toggle works end-to-end"
    - "Inter font visible on all text"
    - "Brand colors applied correctly"
  artifacts:
    - path: "content/themes/avancer-simplement/assets/images/favicon.ico"
      provides: "Browser tab icon"
    - path: "content/themes/avancer-simplement/dist/avancer-simplement.zip"
      provides: "Deployable theme package"
  key_links:
    - from: "Ghost Admin"
      to: "avancer-simplement theme"
      via: "Theme upload and activation"
      pattern: "N/A - manual verification"
---

<objective>
Add logo and favicon assets, build final theme package, and verify complete branding in Ghost.

Purpose: Complete the visual identity with logo/favicon and validate the entire theme works correctly.
Output: Ready-to-deploy theme with all branding elements verified in running Ghost instance.
</objective>

<execution_context>
@/root/.claude/get-shit-done/workflows/execute-plan.md
@/root/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-theme-branding/02-RESEARCH.md
@.planning/phases/02-theme-branding/02-01-SUMMARY.md
@.planning/phases/02-theme-branding/02-02-SUMMARY.md
@.planning/phases/02-theme-branding/02-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create placeholder logo and favicon</name>
  <files>
    content/themes/avancer-simplement/assets/images/favicon.ico
    content/themes/avancer-simplement/assets/images/logo.svg
    content/themes/avancer-simplement/partials/icons/logo.hbs
  </files>
  <action>
1. Check if logo/favicon exist in project root or branding folder:
```bash
ls -la /home/yan/projets/Ghost\ Avancer\ Simplement/*.{ico,png,svg} 2>/dev/null
find /home/yan/projets/Ghost\ Avancer\ Simplement -name "logo*" -o -name "favicon*" 2>/dev/null
```

2. If no existing assets, create placeholder logo.svg:
```bash
cat > content/themes/avancer-simplement/assets/images/logo.svg << 'EOF'
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 40" fill="currentColor">
  <text x="10" y="30" font-family="Inter, sans-serif" font-size="24" font-weight="600">Avancer Simplement</text>
</svg>
EOF
```

3. Create a simple favicon.ico (16x16, 32x32 multi-resolution):
   - Option A: If ImageMagick is available:
   ```bash
   convert -size 32x32 xc:"#074491" content/themes/avancer-simplement/assets/images/favicon.ico
   ```
   - Option B: Create a minimal 1x1 placeholder:
   ```bash
   # Create a minimal valid ICO file (will be replaced with proper branding later)
   printf '\x00\x00\x01\x00\x01\x00\x01\x01\x00\x00\x01\x00\x18\x00\x30\x00\x00\x00\x16\x00\x00\x00\x28\x00\x00\x00\x01\x00\x00\x00\x02\x00\x00\x00\x01\x00\x18\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\x44\x91\x00' > content/themes/avancer-simplement/assets/images/favicon.ico
   ```

4. Create partials/icons/logo.hbs if needed (Casper pattern):
```handlebars
{{!-- Site logo - used in header --}}
{{#if @site.logo}}
    <img class="gh-head-logo" src="{{@site.logo}}" alt="{{@site.title}}">
{{else}}
    <span class="gh-head-logo-text">{{@site.title}}</span>
{{/if}}
```

Note: Ghost allows setting logo/favicon in Admin > Settings > Design. The theme provides fallbacks but the actual branded assets are typically uploaded via Ghost Admin.

AVOID: Spending time on complex logo design.
WHY: Actual branded logo should be uploaded via Ghost Admin; theme just needs to support it.
  </action>
  <verify>
    - `ls content/themes/avancer-simplement/assets/images/logo.svg` exists
    - `ls content/themes/avancer-simplement/assets/images/favicon.ico` exists
  </verify>
  <done>
    Logo and favicon placeholders exist in theme assets. Real branded assets will be uploaded via Ghost Admin.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build final theme package and validate</name>
  <files>
    content/themes/avancer-simplement/dist/avancer-simplement.zip
  </files>
  <action>
1. Ensure all dependencies are installed:
```bash
cd content/themes/avancer-simplement
npm install
```

2. Build production CSS and create zip:
```bash
npm run zip
```

3. Validate theme with GScan (verbose):
```bash
npx gscan . --verbose
```

4. List built assets to confirm all files are included:
```bash
ls -la dist/
unzip -l dist/avancer-simplement.zip | head -50
```

5. Confirm key files are in the zip:
   - default.hbs
   - package.json
   - assets/built/screen.css
   - assets/js/theme-toggle.js
   - partials/theme-toggle.hbs
   - assets/fonts/inter/Inter-Variable.woff2

6. If any errors, fix and rebuild before proceeding.
  </action>
  <verify>
    - `ls content/themes/avancer-simplement/dist/*.zip` returns zip file
    - `cd content/themes/avancer-simplement && npx gscan . 2>&1 | grep -i "error"` returns nothing
    - `unzip -l content/themes/avancer-simplement/dist/*.zip | grep "theme-toggle"` returns matches
  </verify>
  <done>
    Theme package built and validated with all custom files included.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify complete theme in Ghost</name>
  <what-built>
    Complete avancer-simplement theme with:
    - Inter font (self-hosted)
    - Brand colors (light: #074491, dark: #3085F5)
    - Dark/light mode toggle in header
    - localStorage persistence
    - FOWT prevention
    - Logo/favicon support
  </what-built>
  <how-to-verify>
    1. Access Ghost Admin at http://localhost:2368/ghost
    2. Go to Settings > Design > Change theme
    3. Upload the theme zip from content/themes/avancer-simplement/dist/
    4. Activate the theme
    5. Visit the blog at http://localhost:2368

    **Verify these items:**

    [ ] Inter font visible on all text (check body, headings)
    [ ] Brand color #074491 visible (links, buttons in light mode)
    [ ] Toggle button visible in header
    [ ] Click toggle - page switches to dark mode
    [ ] Dark mode uses #3085F5 for brand elements
    [ ] Refresh page - theme preference persists (no flash)
    [ ] Open DevTools Console - no JavaScript errors
    [ ] Favicon visible in browser tab

    **Optional (can be done later via Ghost Admin):**
    [ ] Upload proper logo in Settings > Design > Brand
    [ ] Upload proper favicon in Settings > Design > Brand
  </how-to-verify>
  <resume-signal>
    Type "approved" if all items pass, or describe issues found.
  </resume-signal>
</task>

</tasks>

<verification>
Overall plan verification:
1. Theme zip exists and contains all custom files
2. GScan validation passes
3. Theme uploads and activates in Ghost
4. All visual elements match requirements
5. Toggle functionality works correctly
</verification>

<success_criteria>
- Theme zip created in dist/ folder
- GScan shows no errors
- Theme activates in Ghost without issues
- Inter font renders correctly
- Brand colors match specification
- Toggle button works with persistence
- No console errors
- Favicon displays (placeholder or real)
</success_criteria>

<output>
After completion, create `.planning/phases/02-theme-branding/02-04-SUMMARY.md`
</output>
